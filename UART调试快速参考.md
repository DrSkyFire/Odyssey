# 🎯 UART调试THD - 快速参考卡

## 串口设置
```
波特率: 115200
数据位: 8
停止位: 1
校验:   无
```

## UART输出格式（每秒1次）
```
===STATUS===
Mode:P Run:1 CH1:1 CH2:1 Trig:A FIFO:8192 FFT:0123 Test:0 
H2:0123 H3:0456 BASE:5678 TRG:1 VAL:1
```

## 快速诊断表

| UART输出 | 问题 | 检查 |
|----------|------|------|
| `BASE=0000` | FFT无数据 | spectrum_valid |
| `BASE>1000 H3=0000` | 谐波检测失败 | bin计算 |
| `H3>0 TRG=0` | 触发条件不满足 | H4、H5值 |
| `TRG=1 VAL=0` | 流水线未执行 | fundamental_power |
| `TRG=1 VAL=1 THD=0` | 计算/显示问题 | LUT、滤波器 |

## 预期值（1MHz方波，3Vpp）

| 信号 | 预期范围 | 说明 |
|------|---------|------|
| BASE | 5000-8000 | FFT基波幅度 |
| H2 | 少量 | 偶次谐波小 |
| H3 | 1500-2500 | 约为BASE的30% |
| TRG | 1 | 应该触发 |
| VAL | 1 | 应该有效 |
| **THD** | **40-55%** | HDMI显示 |

## 快速检查清单

测试信号：1MHz方波，3Vpp

- [ ] 串口每秒输出1次
- [ ] MODE = P（参数测量模式）
- [ ] RUN = 1（运行中）
- [ ] BASE > 1000
- [ ] H3 > 500
- [ ] TRG = 1
- [ ] VAL = 1
- [ ] HDMI THD显示 > 0%

## 立即报告

**将此信息粘贴给我**：
```
输入: ___MHz ___波 ___Vpp

UART: H2:____ H3:____ BASE:____ TRG:_ VAL:_

HDMI THD: ____%
```

我将立即分析问题！🚀
